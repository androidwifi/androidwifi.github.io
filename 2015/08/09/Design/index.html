<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Android Databinding | Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="[Transfer]Android Databinding: Goodbye Presenter, hello ViewModel!Original">
<meta property="og:type" content="article">
<meta property="og:title" content="Android Databinding">
<meta property="og:url" content="http://yoursite.com/2015/08/09/Design/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="[Transfer]Android Databinding: Goodbye Presenter, hello ViewModel!Original">
<meta property="og:image" content="http://tech.vg.no/files/2015/07/mvp.png">
<meta property="og:image" content="http://tech.vg.no/files/2015/07/mvvm.png">
<meta property="og:image" content="http://tech.vg.no/files/2015/07/illustration.png">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Android Databinding">
<meta name="twitter:description" content="[Transfer]Android Databinding: Goodbye Presenter, hello ViewModel!Original">
  
    <link rel="alternative" href="/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  <link rel="stylesheet" href="/css/style.css" type="text/css">
  

</head>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Hexo</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="q" value="site:http://yoursite.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-Design" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/08/09/Design/" class="article-date">
  <time datetime="2015-08-09T02:07:35.000Z" itemprop="datePublished">2015-08-09</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      Android Databinding
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>[Transfer]Android Databinding: Goodbye Presenter, hello ViewModel!<br><a href="http://tech.vg.no/2015/07/17/android-databinding-goodbye-presenter-hello-viewmodel/" target="_blank" rel="external">Original</a><br><a id="more"></a></p>
<p>The Model-View-Presenter-pattern (MVP) has been the dominating trend lately when it comes the UI-layer architecture of Android applications. Frameworks like Ted Mosby, Nucleus and Mortar have all talked about Presenters to help you achieving a clean architecture of your app. They also (to a varying degree) help you with the infamous issues of device rotation and state persistence on the Android platform. This isn’t directly related to the concept of MVP, but the pattern helps you isolate the boiler plate code.</p>
<p>Data Binding, as announced on Google I/O 2015 and shipped with the Android M preview as a support library, changes everything. According to the Wikipedia article on MVP, the Presenter has the following tasks:</p>
<pre><code>The presenter acts upon <span class="operator">the</span> model <span class="operator">and</span> <span class="operator">the</span> view. It retrieves data <span class="built_in">from</span> repositories (<span class="operator">the</span> model), <span class="operator">and</span> formats <span class="keyword">it</span> <span class="keyword">for</span> display <span class="operator">in</span> <span class="operator">the</span> view.
</code></pre><p>The thing is that Data Binding framework will take over the main responsibilities of the Presenter (“acting upon the model and the view”), while the remainder is left to the enhanced Model – the ViewModel (“retreiving data from repositories and formatting”). The ViewModel is a standard Java class whose sole responsibility is to represent the data behind a single View. It can merge data from multiple sources (Models) and prepare that data for presentation. I did a short writeup on the ViewModel and how it differs from Data Model or Transport Model.</p>
<p>The architecture we end up with is MVVM – Model-View-ViewModel, and is a proven concept originally coined by Microsoft back in 2005 (don’t let that scare you ;-) ). Let me illustrate the change from MVP to MVVM for you, shamelessly copying Hanne Dorfmann’s illustration from the introduction of his Ted Mosby framework</p>
<p><img src="http://tech.vg.no/files/2015/07/mvp.png" alt=""></p>
<p><img src="http://tech.vg.no/files/2015/07/mvvm.png" alt=""></p>
<p>So all the binding and updating of data to the view is done through the Data Binding Framework. The ObservableField class allow the View to react on changes to the model, and the XML references to fields allow the framework to push changes back to the ViewModel when the user acts upon the View. You can also programatically subscribe to changes in fields so that for instance a TextView is disabled when a CheckBox is clicked. One great advantage of representing the visual state of the View in a standard Java class like this is clear: You can easily unit test the visual behaviour.</p>
<p>Note that in the MVP illustration above there is a method call to Presenter.loadUsers(). This is a Command. In MVVM these are methods defined in the ViewModel. From the Wikipedia article:</p>
<pre><code>The view model <span class="keyword">is</span> an abstraction <span class="keyword">of</span> <span class="keyword">the</span> view <span class="keyword">that</span> exposes public properties <span class="keyword">and</span> commands
</code></pre><p>So this may or may not be a change to what you’re used to. In the MVP pattern it’s likely that your models were “dumb” classes only holding data. Don’t be afraid of putting business logic in your Models or View Models as well. This is a core principle of Object Oriented Programming. So back to Presenter.loadUsers() – this will now be a method in the ViewModel and may be invoked programmatically by the code-behind* of your View or though a data bound command in the XML of your View. That is – if the promises of this issue in the android-developer-preview issue tracker hold up. If we don’t get data binding to commands, we have to resort to the old android:onClick-syntax, or manually adding listeners in the View code as before.</p>
<p>*) “Code-behind” is a term from Microsoft, often with negative associations to early ASP.NET or WinForms. I think it’s a describing term also on Android where the View is composed of two source elements: the View Layout (XML) and the Code-Behind (Java), represented by Fragments, Activities and classes extending View.java.<br>Dealing with system calls</p>
<p>There is one set of use cases which still have to be done in the code-behind of the View – functions which initate system calls, opens dialogs or basically any call which require reference the Context object of Android. Don’t put code like this in the ViewModel. If it contains the line import android.content.Context;, you’re doing it wrong. Don’t do it. Kittens die.</p>
<p>I haven’t quite made up my mind on the best approach to tackle this yet, but that’s because there are several good options. One way would be to keep elements of the presenter concept from Mosby by referencing an interface to the View in the ViewModel. This way you won’t reduce the testability. But instead of having a seperate Presenter class as in Mosby, I’d stick to the View as the concrete implementation of that interface just to keep it simple. Another approach could be to use an event bus like Square’s Otto to initiate commands like new ShowToastMessage(“hello world”). This will yield a greater separation of the view and the viewmodel – but is that a good thing?<br>Don’t we need frameworks now?</p>
<p>So is the Data Binding framework taking over the job of framworks like Mosby or Mortar? Only partly. What I hope to see is these frameworks evolve or fork into MVVM-style frameworks so that we can leverage the best of Data Binding while keeping the dependencies to 3rd-party frameworks to a minimum, and keeping the frameworks small and simple. While the era of the Presenter might be over, the framworks do a just as important job with lifecycle management and view state (ViewModel) persistence. This has not changed (unfortunately*).</p>
<p>*) Wouldn’t it be cool if Google introduced an interface LifeCycleAffected which Fragment, Activity and View implemented? And that interface had methods named addOnPauseListener() and addOnResumeListener()? I leave it up to you to what that might have done with our code base, and the code base of MVP/MVVM frameworks.</p>
<p>update: I’ve recently learned about the AndroidViewModel framework, which actually might be a very good fit for MVVM and Android Data Binding. I’ve not had the time to try this out yet though.<br>Summary</p>
<p>When I first heard that Android M was all about improving the SDK and focusing on the developers, I was really excited. When I heard they were introducing Data Binding, I was stoked. I have worked for years with data binding on other platforms : WinForms, WPF, Silverlight and Windows Phone. I know it will help us write cleaner architecture and less boiler plate code. The framework works with us instead of against us, as I’ve felt it has been for a long time.</p>
<p>But it’s not a silver bullet – there are downsides. The fact that you define stuff in XML is an issue. XML is not compiled. XML cannot be unit tested. Hence you’ll often end up noticing errors run-time instead of compile time. Forgot to bind the field to the view? Tough luck. But the tooling can help a great deal here – that’s why I hope Google is focusing hard on making Android Studio support data binding to the max. Syntax and reference checking of the binding XML, auto complete and navigation support. Field renaming support which propagates to XML. From my testing of Android Studio 1.3 beta – I’m at least assured that the are thinking about it. Some things are supported. A lot isn’t, but we’re still in beta so here’s hoping.<br>Code example</p>
<p>So here is a quick sample I threw together where I try to illustrate the conseqeunces of going from MVP to an MVVM architecture. I used Mosby as a framework in the MVP version with Butterknife for view injection. In the MVVM example I’m using Android M databinding and drop dependencis to both Mosby and Butterknife. The result is that the Presenter can be dropped, the Fragment gets less code but the ViewModel takes over a lot of the code.</p>
<p>In this example I directly reference the View in order to produce toast messages. This may or may not be an approach I advocate later, but in theory we’re not doing anything wrong here. It’s testable if you mock the Fragment using Robolectric and Mockito, and doesn’t leak memory unless you start referencing ViewModels where you should’n’t.</p>
<p>The app is basically a login screen with som async data loading and inter-view dependencies just for illustration purposes.</p>
<p><img src="http://tech.vg.no/files/2015/07/illustration.png" alt=""></p>
<p>If you prefer to read the code in Android Studio – here’s the github repo. Check out the MVP and MVVM tags respectively.</p>
<p>Now, prepare for wall of code:<br>MVP – View – XML</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="title">RelativeLayout</span> <span class="attribute">xmlns:android</span>=<span class="value">"http://schemas.android.com/apk/res/android"</span></span><br><span class="line">                <span class="attribute">xmlns:tools</span>=<span class="value">"http://schemas.android.com/tools"</span></span><br><span class="line">                <span class="attribute">android:layout_width</span>=<span class="value">"match_parent"</span></span><br><span class="line">                <span class="attribute">android:layout_height</span>=<span class="value">"match_parent"</span></span><br><span class="line">                <span class="attribute">android:paddingLeft</span>=<span class="value">"@dimen/activity_horizontal_margin"</span></span><br><span class="line">                <span class="attribute">android:paddingRight</span>=<span class="value">"@dimen/activity_horizontal_margin"</span></span><br><span class="line">                <span class="attribute">android:paddingTop</span>=<span class="value">"@dimen/activity_vertical_margin"</span></span><br><span class="line">                <span class="attribute">android:paddingBottom</span>=<span class="value">"@dimen/activity_vertical_margin"</span></span><br><span class="line">                <span class="attribute">tools:context</span>=<span class="value">".MainActivityFragment"</span>&gt;</span></span><br><span class="line"> </span><br><span class="line">    <span class="tag">&lt;<span class="title">TextView</span></span><br><span class="line">        <span class="attribute">android:text</span>=<span class="value">"..."</span></span><br><span class="line">        <span class="attribute">android:layout_width</span>=<span class="value">"wrap_content"</span></span><br><span class="line">        <span class="attribute">android:layout_height</span>=<span class="value">"wrap_content"</span></span><br><span class="line">        <span class="attribute">android:layout_alignParentEnd</span>=<span class="value">"true"</span></span><br><span class="line">        <span class="attribute">android:id</span>=<span class="value">"@+id/loggedInUserCount"</span>/&gt;</span></span><br><span class="line"> </span><br><span class="line">    <span class="tag">&lt;<span class="title">TextView</span></span><br><span class="line">        <span class="attribute">android:text</span>=<span class="value">"# logged in users:"</span></span><br><span class="line">        <span class="attribute">android:layout_width</span>=<span class="value">"wrap_content"</span></span><br><span class="line">        <span class="attribute">android:layout_height</span>=<span class="value">"wrap_content"</span></span><br><span class="line">        <span class="attribute">android:layout_alignParentEnd</span>=<span class="value">"false"</span></span><br><span class="line">        <span class="attribute">android:layout_toLeftOf</span>=<span class="value">"@+id/loggedInUserCount"</span>/&gt;</span></span><br><span class="line"> </span><br><span class="line">    <span class="tag">&lt;<span class="title">RadioGroup</span></span><br><span class="line">        <span class="attribute">android:layout_marginTop</span>=<span class="value">"40dp"</span></span><br><span class="line">        <span class="attribute">android:id</span>=<span class="value">"@+id/existingOrNewUser"</span></span><br><span class="line">        <span class="attribute">android:gravity</span>=<span class="value">"center"</span></span><br><span class="line">        <span class="attribute">android:layout_width</span>=<span class="value">"wrap_content"</span></span><br><span class="line">        <span class="attribute">android:layout_height</span>=<span class="value">"wrap_content"</span></span><br><span class="line">        <span class="attribute">android:layout_centerHorizontal</span>=<span class="value">"true"</span></span><br><span class="line">        <span class="attribute">android:orientation</span>=<span class="value">"horizontal"</span>&gt;</span></span><br><span class="line"> </span><br><span class="line">        <span class="tag">&lt;<span class="title">RadioButton</span></span><br><span class="line">            <span class="attribute">android:layout_width</span>=<span class="value">"wrap_content"</span></span><br><span class="line">            <span class="attribute">android:layout_height</span>=<span class="value">"wrap_content"</span></span><br><span class="line">            <span class="attribute">android:text</span>=<span class="value">"Returning user"</span></span><br><span class="line">            <span class="attribute">android:id</span>=<span class="value">"@+id/returningUserRb"</span>/&gt;</span></span><br><span class="line"> </span><br><span class="line">        <span class="tag">&lt;<span class="title">RadioButton</span></span><br><span class="line">            <span class="attribute">android:layout_width</span>=<span class="value">"wrap_content"</span></span><br><span class="line">            <span class="attribute">android:layout_height</span>=<span class="value">"wrap_content"</span></span><br><span class="line">            <span class="attribute">android:text</span>=<span class="value">"New user"</span></span><br><span class="line">            <span class="attribute">android:id</span>=<span class="value">"@+id/newUserRb"</span></span><br><span class="line">            /&gt;</span></span><br><span class="line"> </span><br><span class="line">    <span class="tag">&lt;/<span class="title">RadioGroup</span>&gt;</span></span><br><span class="line"> </span><br><span class="line">    <span class="tag">&lt;<span class="title">LinearLayout</span></span><br><span class="line">        <span class="attribute">android:orientation</span>=<span class="value">"horizontal"</span></span><br><span class="line">        <span class="attribute">android:layout_width</span>=<span class="value">"match_parent"</span></span><br><span class="line">        <span class="attribute">android:layout_height</span>=<span class="value">"wrap_content"</span></span><br><span class="line">        <span class="attribute">android:id</span>=<span class="value">"@+id/username_block"</span></span><br><span class="line">        <span class="attribute">android:layout_below</span>=<span class="value">"@+id/existingOrNewUser"</span>&gt;</span></span><br><span class="line"> </span><br><span class="line">        <span class="tag">&lt;<span class="title">TextView</span></span><br><span class="line">            <span class="attribute">android:layout_width</span>=<span class="value">"wrap_content"</span></span><br><span class="line">            <span class="attribute">android:layout_height</span>=<span class="value">"wrap_content"</span></span><br><span class="line">            <span class="attribute">android:textAppearance</span>=<span class="value">"?android:attr/textAppearanceMedium"</span></span><br><span class="line">            <span class="attribute">android:text</span>=<span class="value">"Username:"</span></span><br><span class="line">            <span class="attribute">android:id</span>=<span class="value">"@+id/textView"</span></span><br><span class="line">            <span class="attribute">android:minWidth</span>=<span class="value">"100dp"</span>/&gt;</span></span><br><span class="line"> </span><br><span class="line">        <span class="tag">&lt;<span class="title">EditText</span></span><br><span class="line">            <span class="attribute">android:layout_width</span>=<span class="value">"wrap_content"</span></span><br><span class="line">            <span class="attribute">android:layout_height</span>=<span class="value">"wrap_content"</span></span><br><span class="line">            <span class="attribute">android:id</span>=<span class="value">"@+id/username"</span></span><br><span class="line">            <span class="attribute">android:minWidth</span>=<span class="value">"200dp"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="title">LinearLayout</span>&gt;</span></span><br><span class="line"> </span><br><span class="line">    <span class="tag">&lt;<span class="title">LinearLayout</span></span><br><span class="line">        <span class="attribute">android:orientation</span>=<span class="value">"horizontal"</span></span><br><span class="line">        <span class="attribute">android:layout_width</span>=<span class="value">"match_parent"</span></span><br><span class="line">        <span class="attribute">android:layout_height</span>=<span class="value">"wrap_content"</span></span><br><span class="line">        <span class="attribute">android:layout_alignParentStart</span>=<span class="value">"false"</span></span><br><span class="line">        <span class="attribute">android:id</span>=<span class="value">"@+id/password_block"</span></span><br><span class="line">        <span class="attribute">android:layout_below</span>=<span class="value">"@+id/username_block"</span>&gt;</span></span><br><span class="line"> </span><br><span class="line">        <span class="tag">&lt;<span class="title">TextView</span></span><br><span class="line">            <span class="attribute">android:layout_width</span>=<span class="value">"wrap_content"</span></span><br><span class="line">            <span class="attribute">android:layout_height</span>=<span class="value">"wrap_content"</span></span><br><span class="line">            <span class="attribute">android:textAppearance</span>=<span class="value">"?android:attr/textAppearanceMedium"</span></span><br><span class="line">            <span class="attribute">android:text</span>=<span class="value">"Password:"</span></span><br><span class="line">            <span class="attribute">android:minWidth</span>=<span class="value">"100dp"</span>/&gt;</span></span><br><span class="line"> </span><br><span class="line">        <span class="tag">&lt;<span class="title">EditText</span></span><br><span class="line">            <span class="attribute">android:layout_width</span>=<span class="value">"wrap_content"</span></span><br><span class="line">            <span class="attribute">android:layout_height</span>=<span class="value">"wrap_content"</span></span><br><span class="line">            <span class="attribute">android:inputType</span>=<span class="value">"textPassword"</span></span><br><span class="line">            <span class="attribute">android:ems</span>=<span class="value">"10"</span></span><br><span class="line">            <span class="attribute">android:id</span>=<span class="value">"@+id/password"</span>/&gt;</span></span><br><span class="line"> </span><br><span class="line">    <span class="tag">&lt;/<span class="title">LinearLayout</span>&gt;</span></span><br><span class="line"> </span><br><span class="line">    <span class="tag">&lt;<span class="title">LinearLayout</span></span><br><span class="line">        <span class="attribute">android:orientation</span>=<span class="value">"horizontal"</span></span><br><span class="line">        <span class="attribute">android:layout_width</span>=<span class="value">"match_parent"</span></span><br><span class="line">        <span class="attribute">android:layout_height</span>=<span class="value">"wrap_content"</span></span><br><span class="line">        <span class="attribute">android:layout_below</span>=<span class="value">"@+id/password_block"</span></span><br><span class="line">        <span class="attribute">android:id</span>=<span class="value">"@+id/email_block"</span>&gt;</span></span><br><span class="line"> </span><br><span class="line">        <span class="tag">&lt;<span class="title">TextView</span></span><br><span class="line">            <span class="attribute">android:layout_width</span>=<span class="value">"wrap_content"</span></span><br><span class="line">            <span class="attribute">android:layout_height</span>=<span class="value">"wrap_content"</span></span><br><span class="line">            <span class="attribute">android:textAppearance</span>=<span class="value">"?android:attr/textAppearanceMedium"</span></span><br><span class="line">            <span class="attribute">android:text</span>=<span class="value">"Email:"</span></span><br><span class="line">            <span class="attribute">android:minWidth</span>=<span class="value">"100dp"</span>/&gt;</span></span><br><span class="line"> </span><br><span class="line">        <span class="tag">&lt;<span class="title">EditText</span></span><br><span class="line">            <span class="attribute">android:layout_width</span>=<span class="value">"wrap_content"</span></span><br><span class="line">            <span class="attribute">android:layout_height</span>=<span class="value">"wrap_content"</span></span><br><span class="line">            <span class="attribute">android:inputType</span>=<span class="value">"textEmailAddress"</span></span><br><span class="line">            <span class="attribute">android:ems</span>=<span class="value">"10"</span></span><br><span class="line">            <span class="attribute">android:id</span>=<span class="value">"@+id/email"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="title">LinearLayout</span>&gt;</span></span><br><span class="line"> </span><br><span class="line">    <span class="tag">&lt;<span class="title">Button</span></span><br><span class="line">        <span class="attribute">android:layout_width</span>=<span class="value">"wrap_content"</span></span><br><span class="line">        <span class="attribute">android:layout_height</span>=<span class="value">"wrap_content"</span></span><br><span class="line">        <span class="attribute">android:text</span>=<span class="value">"Log in"</span></span><br><span class="line">        <span class="attribute">android:id</span>=<span class="value">"@+id/loginOrCreateButton"</span></span><br><span class="line">        <span class="attribute">android:layout_below</span>=<span class="value">"@+id/email_block"</span></span><br><span class="line">        <span class="attribute">android:layout_centerHorizontal</span>=<span class="value">"true"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">RelativeLayout</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>MVP – View – Java</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.nilzor.presenterexample;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> android.os.Bundle;</span><br><span class="line"><span class="keyword">import</span> android.view.LayoutInflater;</span><br><span class="line"><span class="keyword">import</span> android.view.View;</span><br><span class="line"><span class="keyword">import</span> android.view.ViewGroup;</span><br><span class="line"><span class="keyword">import</span> android.widget.Button;</span><br><span class="line"><span class="keyword">import</span> android.widget.CompoundButton;</span><br><span class="line"><span class="keyword">import</span> android.widget.RadioButton;</span><br><span class="line"><span class="keyword">import</span> android.widget.TextView;</span><br><span class="line"><span class="keyword">import</span> android.widget.Toast;</span><br><span class="line"><span class="keyword">import</span> com.hannesdorfmann.mosby.mvp.MvpFragment;</span><br><span class="line"><span class="keyword">import</span> com.hannesdorfmann.mosby.mvp.MvpView;</span><br><span class="line"><span class="keyword">import</span> butterknife.InjectView;</span><br><span class="line"><span class="keyword">import</span> butterknife.OnClick;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MainActivityFragment</span> <span class="keyword">extends</span> <span class="title">MvpFragment</span> <span class="keyword">implements</span> <span class="title">MvpView</span> </span>&#123;</span><br><span class="line">    <span class="annotation">@InjectView</span>(R.id.username)</span><br><span class="line">    TextView mUsername;</span><br><span class="line"> </span><br><span class="line">    <span class="annotation">@InjectView</span>(R.id.password)</span><br><span class="line">    TextView mPassword;</span><br><span class="line"> </span><br><span class="line">    <span class="annotation">@InjectView</span>(R.id.newUserRb)</span><br><span class="line">    RadioButton mNewUserRb;</span><br><span class="line"> </span><br><span class="line">    <span class="annotation">@InjectView</span>(R.id.returningUserRb)</span><br><span class="line">    RadioButton mReturningUserRb;</span><br><span class="line"> </span><br><span class="line">    <span class="annotation">@InjectView</span>(R.id.loginOrCreateButton)</span><br><span class="line">    Button mLoginOrCreateButton;</span><br><span class="line"> </span><br><span class="line">    <span class="annotation">@InjectView</span>(R.id.email_block)</span><br><span class="line">    ViewGroup mEmailBlock;</span><br><span class="line"> </span><br><span class="line">    <span class="annotation">@InjectView</span>(R.id.loggedInUserCount)</span><br><span class="line">    TextView mLoggedInUserCount;</span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">MainActivityFragment</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="annotation">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> MainPresenter <span class="title">createPresenter</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> MainPresenter();</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="annotation">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> View <span class="title">onCreateView</span><span class="params">(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> inflater.inflate(R.layout.fragment_main, container, <span class="keyword">false</span>);</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="annotation">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onViewCreated</span><span class="params">(View view, Bundle savedInstanceState)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.onViewCreated(view, savedInstanceState);</span><br><span class="line">        attachEventListeners();</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">attachEventListeners</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        mNewUserRb.setOnCheckedChangeListener(<span class="keyword">new</span> CompoundButton.OnCheckedChangeListener() &#123;</span><br><span class="line">            <span class="annotation">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onCheckedChanged</span><span class="params">(CompoundButton buttonView, <span class="keyword">boolean</span> isChecked)</span> </span>&#123;</span><br><span class="line">                updateDependentViews();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        mReturningUserRb.setOnCheckedChangeListener(<span class="keyword">new</span> CompoundButton.OnCheckedChangeListener() &#123;</span><br><span class="line">            <span class="annotation">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onCheckedChanged</span><span class="params">(CompoundButton buttonView, <span class="keyword">boolean</span> isChecked)</span> </span>&#123;</span><br><span class="line">                updateDependentViews();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="javadoc">/** Prepares the initial state of the view upon startup */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setInitialState</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        mReturningUserRb.setChecked(<span class="keyword">true</span>);</span><br><span class="line">        updateDependentViews();</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="javadoc">/** Shows/hides email field and sets correct text of login button depending on state of radio buttons */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">updateDependentViews</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (mReturningUserRb.isChecked()) &#123;</span><br><span class="line">            mEmailBlock.setVisibility(View.GONE);</span><br><span class="line">            mLoginOrCreateButton.setText(R.string.log_in);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            mEmailBlock.setVisibility(View.VISIBLE);</span><br><span class="line">            mLoginOrCreateButton.setText(R.string.create_user);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setNumberOfLoggedIn</span><span class="params">(<span class="keyword">int</span> numberOfLoggedIn)</span> </span>&#123;</span><br><span class="line">        mLoggedInUserCount.setText(<span class="string">""</span>  + numberOfLoggedIn);</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="annotation">@OnClick</span>(R.id.loginOrCreateButton)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">loginOrCreate</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (mNewUserRb.isChecked()) &#123;</span><br><span class="line">            Toast.makeText(getActivity(), <span class="string">"Please enter a valid email address"</span>, Toast.LENGTH_SHORT).show();</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            Toast.makeText(getActivity(), <span class="string">"Invalid username or password"</span>, Toast.LENGTH_SHORT).show();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>MVP – Presenter<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">package</span> com.nilzor.presenterexample;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> android.os.Handler;</span><br><span class="line"><span class="keyword">import</span> android.os.Message;</span><br><span class="line"><span class="keyword">import</span> com.hannesdorfmann.mosby.mvp.MvpPresenter;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MainPresenter</span> <span class="keyword">implements</span> <span class="title">MvpPresenter</span> </span>&#123;</span><br><span class="line">    MainModel mModel;</span><br><span class="line">    <span class="keyword">private</span> MainActivityFragment mView;</span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">MainPresenter</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        mModel = <span class="keyword">new</span> MainModel();</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="annotation">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">attachView</span><span class="params">(MainActivityFragment view)</span> </span>&#123;</span><br><span class="line">        mView = view;</span><br><span class="line">        view.setInitialState();</span><br><span class="line">        updateViewFromModel();</span><br><span class="line">        ensureModelDataIsLoaded();</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="annotation">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">detachView</span><span class="params">(<span class="keyword">boolean</span> retainInstance)</span> </span>&#123;</span><br><span class="line">        mView = <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">ensureModelDataIsLoaded</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (!mModel.isLoaded()) &#123;</span><br><span class="line">            mModel.loadAsync(<span class="keyword">new</span> Handler.Callback() &#123;</span><br><span class="line">                <span class="annotation">@Override</span></span><br><span class="line">                <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">handleMessage</span><span class="params">(Message msg)</span> </span>&#123;</span><br><span class="line">                    updateViewFromModel();</span><br><span class="line">                    <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="javadoc">/** Notifies the views of the current value of "numberOfUsersLoggedIn", if any */</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">updateViewFromModel</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (mView != <span class="keyword">null</span> &amp;&amp; mModel.isLoaded()) &#123;</span><br><span class="line">            mView.setNumberOfLoggedIn(mModel.numberOfUsersLoggedIn);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>MVP – Model<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">package</span> com.nilzor.presenterexample;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> android.os.AsyncTask;</span><br><span class="line"><span class="keyword">import</span> android.os.Handler;</span><br><span class="line"><span class="keyword">import</span> java.util.Random;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MainModel</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> Integer numberOfUsersLoggedIn;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">boolean</span> mIsLoaded;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isLoaded</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> mIsLoaded;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">loadAsync</span><span class="params">(<span class="keyword">final</span> Handler.Callback onDoneCallback)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">new</span> AsyncTask() &#123;</span><br><span class="line">            <span class="annotation">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">protected</span> Void <span class="title">doInBackground</span><span class="params">(Void... params)</span> </span>&#123;</span><br><span class="line">                <span class="comment">// Simulating some asynchronous task fetching data from a remote server</span></span><br><span class="line">                <span class="keyword">try</span> &#123;Thread.sleep(<span class="number">2000</span>);&#125; <span class="keyword">catch</span> (Exception ex) &#123;&#125;;</span><br><span class="line">                numberOfUsersLoggedIn = <span class="keyword">new</span> Random().nextInt(<span class="number">1000</span>);</span><br><span class="line">                mIsLoaded = <span class="keyword">true</span>;</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">            &#125;</span><br><span class="line"> </span><br><span class="line">            <span class="annotation">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onPostExecute</span><span class="params">(Void aVoid)</span> </span>&#123;</span><br><span class="line">                onDoneCallback.handleMessage(<span class="keyword">null</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;.execute((Void) <span class="keyword">null</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>MVVM – View – XML<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&lt;layout xmlns:android="http://schemas.android.com/apk/res/android"</span><br><span class="line">    xmlns:tools="http://schemas.android.com/tools"&gt;</span><br><span class="line">    &lt;data&gt;</span><br><span class="line">        &lt;variable name="data" type="com.nilzor.presenterexample.MainModel"/&gt;</span><br><span class="line">    &lt;/data&gt;</span><br><span class="line">    &lt;RelativeLayout</span><br><span class="line">        android:layout_width="match_parent"</span><br><span class="line">        android:layout_height="match_parent"</span><br><span class="line">        android:paddingLeft="@dimen/activity_horizontal_margin"</span><br><span class="line">        android:paddingRight="@dimen/activity_horizontal_margin"</span><br><span class="line">        android:paddingTop="@dimen/activity_vertical_margin"</span><br><span class="line">        android:paddingBottom="@dimen/activity_vertical_margin"</span><br><span class="line">        tools:context=".MainActivityFragment"&gt;</span><br><span class="line"> </span><br><span class="line">        &lt;TextView</span><br><span class="line">            android:text="@&#123;data.numberOfUsersLoggedIn&#125;"</span><br><span class="line">            android:layout_width="wrap_content"</span><br><span class="line">            android:layout_height="wrap_content"</span><br><span class="line">            android:layout_alignParentEnd="true"</span><br><span class="line">            android:id="@+id/loggedInUserCount"/&gt;</span><br><span class="line"> </span><br><span class="line">        &lt;TextView</span><br><span class="line">            android:text="# logged in users:"</span><br><span class="line">            android:layout_width="wrap_content"</span><br><span class="line">            android:layout_height="wrap_content"</span><br><span class="line">            android:layout_alignParentEnd="false"</span><br><span class="line">            android:layout_toLeftOf="@+id/loggedInUserCount"/&gt;</span><br><span class="line"> </span><br><span class="line">        &lt;RadioGroup</span><br><span class="line">            android:layout_marginTop="40dp"</span><br><span class="line">            android:id="@+id/existingOrNewUser"</span><br><span class="line">            android:gravity="center"</span><br><span class="line">            android:layout_width="wrap_content"</span><br><span class="line">            android:layout_height="wrap_content"</span><br><span class="line">            android:layout_centerHorizontal="true"</span><br><span class="line">            android:orientation="horizontal"&gt;</span><br><span class="line"> </span><br><span class="line">            &lt;RadioButton</span><br><span class="line">                android:layout_width="wrap_content"</span><br><span class="line">                android:layout_height="wrap_content"</span><br><span class="line">                android:text="Returning user"</span><br><span class="line">                android:checked="@&#123;data.isExistingUserChecked&#125;"</span><br><span class="line">                android:id="@+id/returningUserRb"/&gt;</span><br><span class="line"> </span><br><span class="line">            &lt;RadioButton</span><br><span class="line">                android:layout_width="wrap_content"</span><br><span class="line">                android:layout_height="wrap_content"</span><br><span class="line">                android:text="New user"</span><br><span class="line">                android:id="@+id/newUserRb"</span><br><span class="line">                /&gt;</span><br><span class="line"> </span><br><span class="line">        &lt;/RadioGroup&gt;</span><br><span class="line"> </span><br><span class="line">        &lt;LinearLayout</span><br><span class="line">            android:orientation="horizontal"</span><br><span class="line">            android:layout_width="match_parent"</span><br><span class="line">            android:layout_height="wrap_content"</span><br><span class="line">            android:id="@+id/username_block"</span><br><span class="line">            android:layout_below="@+id/existingOrNewUser"&gt;</span><br><span class="line"> </span><br><span class="line">            &lt;TextView</span><br><span class="line">                android:layout_width="wrap_content"</span><br><span class="line">                android:layout_height="wrap_content"</span><br><span class="line">                android:textAppearance="?android:attr/textAppearanceMedium"</span><br><span class="line">                android:text="Username:"</span><br><span class="line">                android:id="@+id/textView"</span><br><span class="line">                android:minWidth="100dp"/&gt;</span><br><span class="line"> </span><br><span class="line">            &lt;EditText</span><br><span class="line">                android:layout_width="wrap_content"</span><br><span class="line">                android:layout_height="wrap_content"</span><br><span class="line">                android:id="@+id/username"</span><br><span class="line">                android:minWidth="200dp"/&gt;</span><br><span class="line">        &lt;/LinearLayout&gt;</span><br><span class="line"> </span><br><span class="line">        &lt;LinearLayout</span><br><span class="line">            android:orientation="horizontal"</span><br><span class="line">            android:layout_width="match_parent"</span><br><span class="line">            android:layout_height="wrap_content"</span><br><span class="line">            android:layout_alignParentStart="false"</span><br><span class="line">            android:id="@+id/password_block"</span><br><span class="line">            android:layout_below="@+id/username_block"&gt;</span><br><span class="line"> </span><br><span class="line">            &lt;TextView</span><br><span class="line">                android:layout_width="wrap_content"</span><br><span class="line">                android:layout_height="wrap_content"</span><br><span class="line">                android:textAppearance="?android:attr/textAppearanceMedium"</span><br><span class="line">                android:text="Password:"</span><br><span class="line">                android:minWidth="100dp"/&gt;</span><br><span class="line"> </span><br><span class="line">            &lt;EditText</span><br><span class="line">                android:layout_width="wrap_content"</span><br><span class="line">                android:layout_height="wrap_content"</span><br><span class="line">                android:inputType="textPassword"</span><br><span class="line">                android:ems="10"</span><br><span class="line">                android:id="@+id/password"/&gt;</span><br><span class="line"> </span><br><span class="line">        &lt;/LinearLayout&gt;</span><br><span class="line"> </span><br><span class="line">        &lt;LinearLayout</span><br><span class="line">            android:orientation="horizontal"</span><br><span class="line">            android:layout_width="match_parent"</span><br><span class="line">            android:layout_height="wrap_content"</span><br><span class="line">            android:layout_below="@+id/password_block"</span><br><span class="line">            android:id="@+id/email_block"</span><br><span class="line">            android:visibility="@&#123;data.emailBlockVisibility&#125;"&gt;</span><br><span class="line"> </span><br><span class="line">            &lt;TextView</span><br><span class="line">                android:layout_width="wrap_content"</span><br><span class="line">                android:layout_height="wrap_content"</span><br><span class="line">                android:textAppearance="?android:attr/textAppearanceMedium"</span><br><span class="line">                android:text="Email:"</span><br><span class="line">                android:minWidth="100dp"/&gt;</span><br><span class="line"> </span><br><span class="line">            &lt;EditText</span><br><span class="line">                android:layout_width="wrap_content"</span><br><span class="line">                android:layout_height="wrap_content"</span><br><span class="line">                android:inputType="textEmailAddress"</span><br><span class="line">                android:ems="10"</span><br><span class="line">                android:id="@+id/email"/&gt;</span><br><span class="line">        &lt;/LinearLayout&gt;</span><br><span class="line"> </span><br><span class="line">        &lt;Button</span><br><span class="line">            android:layout_width="wrap_content"</span><br><span class="line">            android:layout_height="wrap_content"</span><br><span class="line">            android:text="@&#123;data.loginOrCreateButtonText&#125;"</span><br><span class="line">            android:id="@+id/loginOrCreateButton"</span><br><span class="line">            android:layout_below="@+id/email_block"</span><br><span class="line">            android:layout_centerHorizontal="true"/&gt;</span><br><span class="line">    &lt;/RelativeLayout&gt;</span><br><span class="line">&lt;/layout&gt;</span><br></pre></td></tr></table></figure></p>
<p>MVVM – View – Java<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.nilzor.presenterexample;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> android.app.Fragment;</span><br><span class="line"><span class="keyword">import</span> android.os.Bundle;</span><br><span class="line"><span class="keyword">import</span> android.view.LayoutInflater;</span><br><span class="line"><span class="keyword">import</span> android.view.View;</span><br><span class="line"><span class="keyword">import</span> android.view.ViewGroup;</span><br><span class="line"><span class="keyword">import</span> android.widget.CompoundButton;</span><br><span class="line"><span class="keyword">import</span> android.widget.Toast;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> com.nilzor.presenterexample.databinding.FragmentMainBinding;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MainActivityFragment</span> <span class="keyword">extends</span> <span class="title">Fragment</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> FragmentMainBinding mBinding;</span><br><span class="line">    <span class="keyword">private</span> MainModel mViewModel;</span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">MainActivityFragment</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="annotation">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> View <span class="title">onCreateView</span><span class="params">(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState)</span> </span>&#123;</span><br><span class="line">        View view = inflater.inflate(R.layout.fragment_main, container, <span class="keyword">false</span>);</span><br><span class="line">        mBinding = FragmentMainBinding.bind(view);</span><br><span class="line">        mViewModel = <span class="keyword">new</span> MainModel(<span class="keyword">this</span>, getResources());</span><br><span class="line">        mBinding.setData(mViewModel);</span><br><span class="line">        attachButtonListener();</span><br><span class="line">        <span class="keyword">return</span> view;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">attachButtonListener</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        mBinding.loginOrCreateButton.setOnClickListener(<span class="keyword">new</span> View.OnClickListener() &#123;</span><br><span class="line">            <span class="annotation">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onClick</span><span class="params">(View v)</span> </span>&#123;</span><br><span class="line">                mViewModel.logInClicked();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="annotation">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onViewCreated</span><span class="params">(View view, Bundle savedInstanceState)</span> </span>&#123;</span><br><span class="line">        ensureModelDataIsLodaded();</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">ensureModelDataIsLodaded</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (!mViewModel.isLoaded()) &#123;</span><br><span class="line">            mViewModel.loadAsync();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">showShortToast</span><span class="params">(String text)</span> </span>&#123;</span><br><span class="line">        Toast.makeText(getActivity(), text, Toast.LENGTH_SHORT).show();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>MVVM – ViewModel<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.nilzor.presenterexample;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> android.content.res.Resources;</span><br><span class="line"><span class="keyword">import</span> android.databinding.ObservableField;</span><br><span class="line"><span class="keyword">import</span> android.os.AsyncTask;</span><br><span class="line"><span class="keyword">import</span> android.view.View;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> java.util.Random;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MainModel</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> ObservableField numberOfUsersLoggedIn = <span class="keyword">new</span> ObservableField();</span><br><span class="line">    <span class="keyword">public</span> ObservableField isExistingUserChecked = <span class="keyword">new</span> ObservableField();</span><br><span class="line">    <span class="keyword">public</span> ObservableField emailBlockVisibility = <span class="keyword">new</span> ObservableField();</span><br><span class="line">    <span class="keyword">public</span> ObservableField loginOrCreateButtonText = <span class="keyword">new</span> ObservableField();</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">boolean</span> mIsLoaded;</span><br><span class="line">    <span class="keyword">private</span> MainActivityFragment mView;</span><br><span class="line">    <span class="keyword">private</span> Resources mResources;</span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">MainModel</span><span class="params">(MainActivityFragment view, Resources resources)</span> </span>&#123;</span><br><span class="line">        mView = view;</span><br><span class="line">        mResources = resources; <span class="comment">// You might want to abstract this for testability</span></span><br><span class="line">        setInitialState();</span><br><span class="line">        updateDependentViews();</span><br><span class="line">        hookUpDependencies();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isLoaded</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> mIsLoaded;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">setInitialState</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        numberOfUsersLoggedIn.set(<span class="string">"..."</span>);</span><br><span class="line">        isExistingUserChecked.set(<span class="keyword">true</span>);</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">hookUpDependencies</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        isExistingUserChecked.addOnPropertyChangedCallback(<span class="keyword">new</span> android.databinding.Observable.OnPropertyChangedCallback() &#123;</span><br><span class="line">            <span class="annotation">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onPropertyChanged</span><span class="params">(android.databinding.Observable sender, <span class="keyword">int</span> propertyId)</span> </span>&#123;</span><br><span class="line">                updateDependentViews();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">updateDependentViews</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (isExistingUserChecked.get()) &#123;</span><br><span class="line">            emailBlockVisibility.set(View.GONE);</span><br><span class="line">            loginOrCreateButtonText.set(mResources.getString(R.string.log_in));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            emailBlockVisibility.set(View.VISIBLE);</span><br><span class="line">            loginOrCreateButtonText.set(mResources.getString(R.string.create_user));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">loadAsync</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">new</span> AsyncTask() &#123;</span><br><span class="line">            <span class="annotation">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">protected</span> Void <span class="title">doInBackground</span><span class="params">(Void... params)</span> </span>&#123;</span><br><span class="line">                <span class="comment">// Simulating some asynchronous task fetching data from a remote server</span></span><br><span class="line">                <span class="keyword">try</span> &#123;Thread.sleep(<span class="number">2000</span>);&#125; <span class="keyword">catch</span> (Exception ex) &#123;&#125;;</span><br><span class="line">                numberOfUsersLoggedIn.set(<span class="string">""</span> + <span class="keyword">new</span> Random().nextInt(<span class="number">1000</span>));</span><br><span class="line">                mIsLoaded = <span class="keyword">true</span>;</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;.execute((Void) <span class="keyword">null</span>);</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">logInClicked</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">// Illustrating the need for calling back to the view though testable interfaces.</span></span><br><span class="line">        <span class="keyword">if</span> (isExistingUserChecked.get()) &#123;</span><br><span class="line">            mView.showShortToast(<span class="string">"Invalid username or password"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            mView.showShortToast(<span class="string">"Please enter a valid email address"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2015/08/09/Design/" data-id="cj73dcyhg000idvwalm9rbwrh" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Design/">Design</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2015/10/03/Building-Android-Source-code/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          Building Android Source code
        
      </div>
    </a>
  
  
    <a href="/2015/05/13/Introduce-me/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">Introduce me</div>
    </a>
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Design/">Design</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Git/">Git</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Jobs/">Jobs</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Tools/">Tools</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/WebRTC/">WebRTC</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/cocos2d-js/">cocos2d-js</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/live-pusher/">live-pusher</a><span class="tag-list-count">1</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/Design/" style="font-size: 10px;">Design</a><a href="/tags/Git/" style="font-size: 10px;">Git</a><a href="/tags/Jobs/" style="font-size: 20px;">Jobs</a><a href="/tags/Tools/" style="font-size: 10px;">Tools</a><a href="/tags/WebRTC/" style="font-size: 10px;">WebRTC</a><a href="/tags/cocos2d-js/" style="font-size: 20px;">cocos2d-js</a><a href="/tags/live-pusher/" style="font-size: 10px;">live-pusher</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/09/">September 2017</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/03/">March 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/12/">December 2015</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/10/">October 2015</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/08/">August 2015</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/05/">May 2015</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/04/">April 2015</a><span class="archive-list-count">2</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recents</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2017/09/02/The-stragedy-of-breaking-GFW/">The stragedy of breaking GFW</a>
          </li>
        
          <li>
            <a href="/2017/09/02/Ubuntu-上下载webrtc-编译android版本/">Ubuntu 上下载webrtc , 编译android版本</a>
          </li>
        
          <li>
            <a href="/2017/03/19/Android推流在小米4内存上涨问题解决/">Android推流在小米4内存上涨问题解决</a>
          </li>
        
          <li>
            <a href="/2015/12/16/使用submodule来管理公共依赖工程/">使用submodule来管理公共依赖工程</a>
          </li>
        
          <li>
            <a href="/2015/12/02/Cocos2d-JS-功能点/">Cocos2d-JS 功能点</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2017 John Doe<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css" type="text/css">
  <script src="/fancybox/jquery.fancybox.pack.js" type="text/javascript"></script>


<script src="/js/script.js" type="text/javascript"></script>

  </div>
</body>
</html>